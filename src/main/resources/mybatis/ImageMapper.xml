<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lifecode.mybatis.mapper.ImageMapper">
	
	<select id="selectImages" resultType="ImageVO">
		SELECT
			A.IMAGE_ID
			,A.PATH
		FROM
			IMAGES A
			<if test='post_id != null and post_id != ""'>
				JOIN POSTS_IMAGES B ON A.IMAGE_ID = B.IMAGE_ID
				LEFT JOIN POSTS C ON B.POST_ID = C.POST_ID
			</if>
		<where>
			<if test='post_id != null and post_id != ""'>
				C.POST_ID = #{post_id}
			</if>
		</where>
		GROUP BY A.IMAGE_ID
	</select>
</mapper>